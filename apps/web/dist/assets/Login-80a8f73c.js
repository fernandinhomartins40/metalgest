import{c as f,u as C,d as I,G as R,r as u,j as e,m as l,B as x,A as F}from"./index-15ba3699.js";import{u as L}from"./index.esm-853230a7.js";import{P as M}from"./PasswordInput-44299a4c.js";const q=f("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),T=f("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function P(){const h=C(),{toast:i}=I(),{login:j}=R(),[p,g]=u.useState(!1),[c,N]=u.useState(!1),{register:n,handleSubmit:w,formState:{errors:m,isSubmitting:y},getValues:k,setValue:o}=L();u.useEffect(()=>{const s=localStorage.getItem("savedCredentials");if(s)try{const a=JSON.parse(s);a!=null&&a.email&&(o("email",a.email),o("password",a.password),o("rememberMe",!0))}catch(a){console.error("Error parsing saved credentials:",a)}},[o]);const S=async s=>{var a,v,b;try{const r=await j(s.email,s.password);s.rememberMe?localStorage.setItem("savedCredentials",JSON.stringify({email:s.email,password:s.password})):localStorage.removeItem("savedCredentials"),N(!0);const t=((a=r.user)==null?void 0:a.name)||"Usuário";i({title:"✅ Login realizado com sucesso!",description:`Bem-vindo de volta, ${t}!`,duration:3e3}),setTimeout(()=>{h("/app",{replace:!0})},1500)}catch(r){console.error("Login error:",r);let t="Credenciais inválidas. Verifique seus dados e tente novamente.",d="❌ Erro no login";(v=r.message)!=null&&v.includes("UNAUTHORIZED")?(d="🔐 Credenciais Inválidas",t="Email ou senha incorretos. Verifique seus dados e tente novamente."):(b=r.message)!=null&&b.includes("inactive")?(d="⚠️ Conta Inativa",t="Sua conta está inativa. Entre em contato com o suporte."):r.message&&(t=r.message),i({variant:"destructive",title:d,description:t,duration:5e3})}},E=async()=>{try{if(g(!0),!k("email"))throw new Error("Por favor, insira seu email");i({title:"Funcionalidade em desenvolvimento",description:"O reset de senha será implementado em breve"})}catch(s){i({variant:"destructive",title:"Erro ao resetar senha",description:s.message})}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 via-background to-secondary/5",children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute top-0 -left-4 w-72 h-72 bg-primary/10 rounded-full filter blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-secondary/10 rounded-full filter blur-3xl"})]}),e.jsx("div",{className:"relative z-10 min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs(l.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(l.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-4xl font-extrabold tracking-tight bg-gradient-to-r from-primary via-primary/80 to-secondary bg-clip-text text-transparent",children:"Metalgest"}),e.jsx("h2",{className:"mt-6 text-3xl font-bold text-gray-900",children:"Bem-vindo de volta"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Entre com suas credenciais para acessar o sistema"})]}),e.jsxs(l.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8",children:[e.jsx("div",{className:"bg-white/60 backdrop-blur-lg p-8 rounded-2xl shadow-lg border border-gray-100",children:e.jsxs("form",{className:"space-y-6",onSubmit:w(S),children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),e.jsx("input",{...n("email",{required:"Email é obrigatório"}),type:"email",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-primary/20 focus:border-primary transition-colors duration-200",placeholder:"seu@email.com"}),m.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.email.message})]}),e.jsx(M,{register:n,name:"password",label:"Senha",placeholder:"••••••••",error:m.password,validation:{required:"Senha é obrigatória"}}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("rememberMe"),type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Lembrar-me"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("keepConnected"),type:"checkbox",className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),e.jsx("label",{htmlFor:"keep-connected",className:"ml-2 block text-sm text-gray-700",children:"Manter-me conectado"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(x,{type:"button",variant:"link",disabled:p,onClick:E,className:"text-sm text-primary hover:text-primary/90 flex items-center gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),p?"Enviando...":"Esqueci minha senha"]})}),e.jsx(l.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:e.jsx(x,{type:"submit",disabled:y||c,className:`w-full py-2 px-4 flex items-center justify-center gap-2 transition-all duration-200 text-white rounded-lg ${c?"bg-green-500 hover:bg-green-500":"bg-primary hover:bg-primary/90"} disabled:opacity-50 disabled:cursor-not-allowed`,children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-white text-green-500 flex items-center justify-center text-xs",children:"✓"}),"Sucesso! Redirecionando..."]}):y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Entrando..."]}):e.jsxs(e.Fragment,{children:["Entrar",e.jsx(T,{className:"w-4 h-4"})]})})})]})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs(x,{type:"button",variant:"link",onClick:()=>h("/register"),className:"text-sm text-primary hover:text-primary/90 flex items-center justify-center gap-2",children:["Não tem uma conta? Cadastre-se",e.jsx(F,{className:"w-4 h-4"})]})})]})]})})]})})}export{P as default};
